<html>
  <title>Talk Topic Index</title>
  <script src="jquery-latest.min.js"></script>
  <script src="compute-rank-documents-in-each-topic-out.js"></script>
  <script>
  $(function() {
    // console.log(talkData[0]);
    var $topics = $('#topics');
    $.each(talkData, function(i, data) {
      data.keyWords = data.keyWords.splice(0, data.keyWords.length-1);
      var li = $('<li>');
      li.addClass('topic');
      li.prop('topic_id', i);
      li.html('<strong>words</strong>: <i>' + data.keyWords.join(', ') + '</i><br /><span style="color: green;">[<strong>probability</strong>: ' + data.value + ']</span>');

      // if(i < 20)
      $topics.append(li);
    });
    $('.topic').on('click', function() {
      var $el = $(this);
      var docs = talkData[$el.prop('topic_id')].documents.concat().splice(0, 100);
      // console.log(docs);
      var $docs = $('#docs');
      $docs.html('').parent().show();
      $.each(docs, function(i, doc) {
        $docs.append('<li class="doc" talkID="' + doc.talkID + '">' + doc.title + '<br /><span style="color:green;">[<strong>weight</strong>: ' + doc.distance + ']</span>' + '</li>');
      });

      $('.doc').on('click', function() {
        var location = 'http://scriptures.byu.edu/gettalk.php?ID=' + $(this).attr('talkID');
        $('#selectedDoc').attr('src', location).parent().show();
        $('#link').text(location);
      });
    });
  });
  </script>
  <style>
    h2 {
      color: goldenrod;
    }
  </style>
  <body>
    <h1>Talk Topic Index</h1>
    <div style="width:30%; float: left;">
      <h2>Topics</h2>
      <ul id="topics"></ul>
    </div>
    <div style="width:28%; float: left; padding-left: 50px; display: none;">
      <h2>Talks Sorted by Topic</h2>
      <ul id="docs"></ul>
    </div>
    <div style="width:18%; float: left; padding-left: 50px; display: none;">
      <h2>Selected Talk</h2>
      <p>Link: <a id="link"></a></p>
      <iframe id="selectedDoc" src="http://scriptures.byu.edu/gettalk.php?ID=1760" width="600" height="700"></iframe>
    </div>
  </body>
</html>
